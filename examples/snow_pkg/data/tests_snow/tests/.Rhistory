get_param_value(xdoc,"julapI_or_sum_upvt")
1:dim(vec_values)[2]
vec_values[1, ]
set_param_value(xdoc,"julapI_or_sum_upvt",vec_values[1, ],1:dim(vec_values)[2])
warnings
warnings()
a <- 1
a
installed.packages()
install.packages(c("bookdown", "dbplyr", "digest", "evaluate", "knitr", "littler", "markdown", "openssl", "pillar", "progress", "reprex", "rmarkdown", "sensitivity", "tibble", "XML"))
library(readxl)
library(Classes)
library(SticsOnR)
in_dir <- "/home/plecharpent/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/data_test/V9/templates"
file <- "one_soil.xml"
fpath <- file.path(in_dir, file)
#xmlParseDoc(fpath)
xdoc <- xmldocument(fpath)
in_dir <- "/home/plecharpent/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/data/V9/templates"
fpath <- file.path(in_dir, file)
#xmlParseDoc(fpath)
xdoc <- xmldocument(fpath)
base_node <- getNodeS(xdoc, "//sol")
base_node
soils_names <- c("soilA","soilB","soilC")
nb_soils <- length(soils_names)
for (s in 1:nb_soils ) {
new_node <- getNodeSet(xmlParse(base_node_txt), "//sol")
addNodes(xdoc,new_node,"/sols")
set_param_value(xdoc,"sol",soils_names[s],"solcanne")
}
base_node_txt <- saveXML(base_node[[1]])
base_node_txt
for (s in 1:nb_soils ) {
new_node <- getNodeSet(xmlParse(base_node_txt), "//sol")
addNodes(xdoc,new_node,"/sols")
set_param_value(xdoc,"sol",soils_names[s],"solcanne")
}
xdoc
xdoc@content
new_node
#xmlParseDoc(fpath)
xdoc <- xmldocument(fpath)
base_node <- getNodeS(xdoc, "//sol")
base_node_txt <- saveXML(base_node[[1]])
soils_names <- c("soilA","soilB","soilC")
nb_soils <- length(soils_names)
for (s in 1:nb_soils ) {
new_node <- getNodeSet(xmlParse(base_node_txt), "//sol")
addNodes(xdoc,new_node[[1]],"/sols")
set_param_value(xdoc,"sol",soils_names[s],"solcanne")
}
xdoc@content
debugSource('~/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/test_gen_sols_file.R')
xdoc
xdoc@content
xdoc@content
debugSource('~/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/test_gen_sols_file.R')
xdoc
xdoc@content
debugSource('~/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/test_gen_sols_file.R')
xdoc@content
xdoc@content
new_node
new_node[[1]]
class(new_node[[1]])
xdoc@content
source('~/Work/workspace/Example_Stics_Tests/R/utilsR/SticsRfilesOp/set_stics_par_values_in_xml/test_gen_sols_file.R')
get_params_values(xdoc,list("sol","argi"))
a <- c(1,2)
install.packages("lobstr")
devtools::install_github("r-lib/lobstr")
library("lobstr")
obj_addr(a)
b <- a
obj_addr(b)
c=a
obj_addr(c)
a
a <- 2
b
obj_addr(a)
obj_addr(b)
b <<- a
b
obj_addr(b)
a <- 10
b
obj_inspect(a)
obj_size(a)
tic()
install.packages("tictoc")
library(tictoc)
tic()
toc()
toc.outmsg()
tic("test")
toc()
toc.outmsg()
log.lst <- tic.log(format = FALSE)
tic("test1")
toc()
log.lst
log.lst <- tic.log(format = TRUE)
tic("test1")
toc(log = T)
log.lst
a <- time()
a <- Sys.time()
Sys.time() - a
as.numeric(Sys.time() - a)
as.numeric(Sys.time() - a)
as.numeric(Sys.time() - a)
as.numeric(Sys.time() - a)
as.numeric(Sys.time() - a)
as.numeric(Sys.time() - a)
getwd()
list.files(getwd())
list.files(path = "tmp")
list.files(path = "tmp/test_file_remove_R/")
file.remove(path = "tmp/test_file_remove_R/", pattern="*")
getwd()
list.files(path = "tmp")
list.files(path = "tmp", pattern = "*")
list.files(path = "tmp", pattern = "*.xml")
dir(path = "tmp", pattern = "*.xml")
dir(path = "tmp", pattern = "*.xm")
dir(path = "tmp", pattern = "*")
dir(path = "tmp", pattern = "*.sti")
dir(path = "tmp", pattern = ".sti^")
file.remove(dir(path = "tmp", pattern = ".sti^"))
file.remove(dir(path = "tmp", pattern = ".sti$"))
file.remove(dir(path = "tmp", pattern = "\.sti$"))
file.remove(dir(path = "tmp", pattern = "\\.sti$"))
dir(path = "tmp", pattern = "\\.sti$")
dir(path = "tmp", pattern = "\\.sti$")
dir(path = "tmp/test_file_remove/", pattern = "\\.sti$")
file.remove(dir(path = "tmp/test_file_remove/", pattern = "\\.sti$"))
dir(path = "tmp/test_file_remove/", pattern = "\\.sti$")
file.remove(dir(path = "tmp/test_file_remove/", pattern = "\\.sti$"))
file.remove(dir(path = "tmp/test_file_remove", pattern = "\\.sti$"))
file.remove(dir(path = "tmp/test_file_remove", pattern = "\\.sti$", full.names = ))
getwd()
file.remove(dir(path = "tmp/test_file_remove", pattern = "\\.sti$", full.names = T))
source('~/Work/workspace/Example_Stics_Tests/R/IDESticsR/giveUsmList.r')
typo <- "/home/plecharpent/Work/workspace/Example_Stics_Tests/Typo/typo_usms.csv"
giveUSMList(typo_path,c("source","UseIndependantUSMEvaluation",c("sms","1")))
giveUSMList(typo,c("source","UseIndependantUSMEvaluation",c("sms","1")))
giveUSMList(typo,c("source","UseIndependantUSMEvaluation",c("sms","1")))
giveUSMList(typo,c("source","UseIndependantUSMEvaluation",c("sms","1")))
UsmMetadata
giveUSMList(typo,c("source","UseForIndepUSMEvaluation",c("sms","1")))
giveUSMList(typo,c("source","UseForIndepUSMEvaluation",c("sms","1")))
UsmMetadata$UseForIndepUSMEvaluation
clas(UsmMetadata$UseForIndepUSMEvaluation)
class(UsmMetadata$UseForIndepUSMEvaluation)
giveUSMList(typo,c("source","UseForIndepUSMEvaluation",c("sms",1)))
giveUSMList(typo,c("source","UseForIndepUSMEvaluation",c("sms",1L)))
giveUSMList(typo,c("source","UseForIndepUSMEvaluation"),c("sms",1)))
giveUSMList(typo,c("source","UseForIndepUSMEvaluation"),c("sms",1))
usms <- giveUSMList(typo,c("source","UseForIndepUSMEvaluation"),c("sms",1))
length(usm)
length(usms)
usms <- giveUSMList(typo,c("source","UseForIndepUSMEvaluation"),c("sms",1))
length(usms)
?.Fortran
source('~/Work/projet_stics/chantier_modularisation/projet_modularisation_stics/modules_dev/module_Snow_svn/tests/snow_routine.R')
setwd("~/Work/projet_stics/chantier_modularisation/projet_modularisation_stics/modules_dev/module_Snow_svn/tests")
# data path
dpath <- "./data"
ppath <- file.path(dpath, "snow_model3_param.txt")
# loading parameters values
p <- readLines(ppath)
dp <- data.frame(par = p[seq(1,22,2)], value = as.numeric(p[seq(2,22,2)]),
stringsAsFactors = F)
for (i in 1:dim(dp)[1]) {
assign(dp$par[i],dp$value[i])
}
tmin
tminseuil
tmaxseuil
prof
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
# running tmin
Sdepth <- 0.00001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tmin <- 0
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
reload_lib(lib_path)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- -0.0001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- -0.1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
tminseuil
seq()
seq(-10,10,1)
tmin <- seq(-10,10,1)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
# running tmin
Sdepth <- seq(0.1,10,0.1)
#tmin <- seq(-10,10,1)
tmin <- -10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
plot(Sdepth, tminrec)
# running tmin
Sdepth <- seq(0.1,20,0.1)
tminrec
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.00001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- 0.00001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- 1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- 1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -2
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.00002
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- 0.00002
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.02
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.2
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.3
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.4
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tminseuil
tmin <- -0.00002
plot(Sdepth, tminrec)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -0.0000
tmin <- 0.0000
plot(Sdepth, tminrec)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
source('~/Work/projet_stics/chantier_modularisation/projet_modularisation_stics/modules_dev/module_Snow_svn/tests/snow_routine.R')
snow_new_tmin_calc_base(Sdepth, tmin, prof, tminseuil, tmaxseuil)
tmin
plot(Sdepth, tminrec)
tminrec <- snow_new_tmin_calc_base(Sdepth, tmin, prof, tminseuil, tmaxseuil)
plot(Sdepth, tminrec)
tmin
tmin <- -0.5
tminrec <- snow_new_tmin_calc_base(Sdepth, tmin, prof, tminseuil, tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -10
tminrec <- snow_new_tmin_calc_base(Sdepth, tmin, prof, tminseuil, tmaxseuil)
plot(Sdepth, tminrec)
tmin <- -1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tminrec <- snow_new_tmin_calc_base(Sdepth, tmin, prof, tminseuil, tmaxseuil)
plot(Sdepth, tminrec)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
1-0.98
1-0.98*1.5
0.47-0.5
1.-0.5
1.-0.5*0.47
-0.5
1.-0.5*0.47
1.-0.5*0.47-0.5
tmin
tmin=-0.0001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin=-2
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin=-0.5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin=-0.6
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin=-0.4
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin=-0.3
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmaxseuil
tmin=1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
9.99/10
-1
9.99/10-1
0.001*0.5
tmin = 0.00001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0.1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
0.1/10
-1
0.1/10-1
10.5/0.99
0.01/10
0.01/10-1
9.5*-0999
9.5*(-0.999)
9.5*(-0.999)-0.5
tmin = -10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = -5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0.6
tmin = - 0.6
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = - 0.5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = - 0.4
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = - 0.1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = - 0.0001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0.0001
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0.1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 0.5
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 1
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = 10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tmin = -10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
reload_lib(lib_path)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tmin = 10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
reload_lib(lib_path)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tmin = -10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
reload_lib(lib_path)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tmin
tmin = 10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
reload_lib(lib_path)
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
tminrec
tmin
tmin=-10
tminrec
tmin=10
tminrec <- snow_tmin_calc(Sdepth, tmin, prof, tminseuil,
tmaxseuil)
plot(Sdepth, tminrec)
tminrec <- snow_tmin_calc(0.2, -0.2, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc(0.2, 0.6, prof, tminseuil,
tmaxseuil)
tminrec
tmin=1
tminrec <- snow_tmin_calc(0.2, 0.6, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc(-0.2, 0, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc(-0.2, 0.000001, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc(-10, 0.000001, prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc(-100, 0.000001, prof, tminseuil,
tmaxseuil)
tminrec
Sdepth
tmin
tmin = 10
tminrec <- snow_tmin_calc(Sdepth, tmin = , prof, tminseuil,
tmaxseuil)
tminrec <- snow_tmin_calc(Sdepth, tmin , prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc_base(Sdepth[1], tmin , prof, tminseuil,
tmaxseuil)
tminrec
0.1/100
source('~/Work/projet_stics/chantier_modularisation/projet_modularisation_stics/modules_dev/module_Snow_svn/tests/compare_to_reference_XL_model.R')
r
tminrec <- snow_tmin_calc_base(0, 1.5 , prof, tminseuil,
tmaxseuil)
tminrec
tminrec <- snow_tmin_calc_base(0.001, 1.5 , prof, tminseuil,
tmaxseuil)
tminrec
